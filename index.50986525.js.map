{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAO,MAAMC,EAAWC,SAASC,cAAc,eACzCC,EAAUF,SAASG,uBAAuB,WAKzC,SAASC,EAAaC,GAEzB,GADAA,EAAEC,iBACuB,QAArBD,EAAEE,OAAOC,QAAmB,CAC5B,MAAMC,EAAe,CACjBC,GAAIL,EAAEE,OAAOI,cAAcA,cAAcA,cAAcC,QAAQF,GAC/DG,cAAeR,EAAEE,OAAOI,cAAcA,cAAcG,KACpDC,WAAYV,EAAEE,OAAOI,cAAcC,QAAQG,WAC3CC,MAAOX,EAAEE,OAAOU,IAChBC,cAAeb,EAAEE,OAAOY,mBAAmBC,SAAS,GAAGR,QAAQS,MAC/DA,MAAOhB,EAAEE,OAAOY,mBAAmBC,SAAS,GAAGE,UAC/CC,MAAOlB,EAAEE,OAAOY,mBAAmBC,SAAS,GAAGD,mBAAmBG,UAClEE,aAAcnB,EAAEE,OAAOY,mBAAmBC,SAAS,GAAGD,mBAAmBA,mBAAmBP,QAAQa,KACpGC,KAAMrB,EAAEE,OAAOY,mBAAmBC,SAAS,GAAGD,mBAAmBA,mBAAmBA,mBAAmBG,UACvGK,UAAWtB,EAAEE,OAAOY,mBAAmBC,SAAS,GAAGD,mBAAmBA,mBAAmBA,mBAAmBP,QAAQgB,OAGxH,IAAIC,EAAU7B,SAAS8B,cAAc,OACrCD,EAAQE,UAAY,UACpB/B,SAASgC,KAAKC,sBAAsB,aAAcJ,GAM1D,SAAqBpB,GACjB,MAAMC,GACFA,EAAEG,cACFA,EAAaE,WACbA,EAAUC,MACVA,EAAKE,cACLA,EAAaG,MACbA,EAAKE,MACLA,EAAKG,KACLA,EAAIC,UACJA,GAAclB,EAClB,IAAIyB,EAAQ,gJAGkCxB,iFAElBG,iPAKsBQ,EAAMc,qOAIAT,cAAiBC,6LAI5CZ,wLAIAG,EAAciB,wMAIdZ,sLAKJP,mZAUzBd,EAAQ,GAAGkC,mBAAmB,YAAaF,E,CAzDvCG,CAAY5B,GAwHpB,SAAuB6B,GACnB,IAAIC,EAAYC,KAAKC,MAAMC,aAAaC,QAAQ,cAC5CC,EAAYJ,KAAKC,MAAMC,aAAaC,QAAQ,cAC5CE,EAAY7C,SAASC,cAAc,oBACnC6C,EAAgBD,EAAUzB,SAAS,GAAGA,SAAS,GAAGA,SAAS,GAAGA,SAAS,GACvE2B,EAAcF,EAAUzB,SAAS,GAAGA,SAAS,GAAGA,SAAS,GAAGA,SAAS,GAEjD,GAApBmB,EAAUS,QACVT,EAAUU,SAAQC,IACVA,EAAMxC,KAAO4B,IACbQ,EAAcxB,UAAY,sBAC1BwB,EAAcK,UAAUC,IAAI,Y,IAKhB,GAApBR,EAAUI,QACVJ,EAAUK,SAAQC,IACVA,EAAMxC,KAAO4B,IACbS,EAAYzB,UAAY,oBACxByB,EAAYI,UAAUC,IAAI,Y,IA3IlCC,CAAc5C,EAAaC,G,EAiJnC,SAAS4C,EAAUC,EAAWC,GAC1B,IAAIC,EAAcjB,KAAKC,MAAMC,aAAaC,QAAQa,IAC9CE,GAAS,EAGb,IAAK,MAAMR,KAASO,EACZP,EAAMxC,IAAM6C,EAAU7C,KACtBgD,GAAS,IAIF,IAAXA,IACAD,EAAYE,KAAKJ,GACjBb,aAAakB,QAAQJ,EAAMhB,KAAKqB,UAAUJ,I,CAKlD,SAASK,EAAexB,EAASkB,GAC7B,IAAIC,EAAcjB,KAAKC,MAAMC,aAAaC,QAAQa,IAElDC,EACKM,QAAOb,GAASA,EAAMxC,IAAM4B,IAC5B0B,KAAId,IACD,IAAIe,EAAQR,EAAYS,QAAQhB,GAChCO,EAAYU,OAAOF,EAAO,GAC1BvB,aAAakB,QAAQJ,EAAMhB,KAAKqB,UAAUJ,GAAa,G,CAlMnE1D,EAASqE,iBAAiB,QAAShE,GACnCJ,SAASoE,iBAAiB,SAiF1B,SAAiB/D,GACTA,EAAEE,OAAO4C,UAAUkB,SAAS,iBAoHhCnE,EAAQ,GAAGkB,SAAS,GAAG+B,UAAUC,IAAI,SAErCkB,YAAW,KACPpE,EAAQ,GAAGqE,QAAQ,GACpB,OApHH,GAAIlE,EAAEE,OAAO4C,UAAUkB,SAAS,gBAAiB,CAE7C,IAAIG,EAAQnE,EAAEE,OAAOI,cAAc8D,uBAAuBA,uBAAuBrD,SAAS,GAAGA,SAAS,GAAGE,UACzGkD,EAAQA,EAAME,MAAM,KAEpB,MAAMnB,EAAY,CACd7C,GAAIL,EAAEE,OAAOI,cAAc8D,uBAAuBA,uBAAuB9D,cAAcA,cAAcC,QAAQF,GAC7GiE,YAAatE,EAAEE,OAAOI,cAAc8D,uBAAuBA,uBAAuB9D,cAAc8D,uBAAuBrD,SAAS,GAAGwD,IACnIvD,MAAOhB,EAAEE,OAAOI,cAAc8D,uBAAuBA,uBAAuBrD,SAAS,GAAGA,SAAS,GAAGE,UACpGuD,aAAcL,EAAM,GACpBM,WAAYN,EAAM,GAClBzD,WAAYV,EAAEE,OAAOI,cAAc8D,uBAAuBA,uBAAuBrD,SAAS,GAAGA,SAAS,GAAGE,UACzGyD,eAAgB1E,EAAEE,OAAOI,cAAc8D,uBAAuBA,uBAAuBrD,SAAS,GAAGA,SAAS,GAAGE,UAC7G0D,UAAW3E,EAAEE,OAAOI,cAAc8D,uBAAuBA,uBAAuBrD,SAAS,GAAGA,SAAS,GAAGE,UACxG2D,SAAU5E,EAAEE,OAAOI,cAAc8D,uBAAuBrD,SAAS,GAAGE,WAGxC,YAA5BjB,EAAEE,OAAOK,QAAQsE,SACU,mBAAvB7E,EAAEE,OAAOe,WACTgC,EAAUC,EAAW,aACrBlD,EAAEE,OAAOe,UAAY,sBACrBwC,EAAeP,EAAU7C,GAAI,aAC7BL,EAAEE,OAAOY,mBAAmBG,UAAY,eACxCjB,EAAEE,OAAO4C,UAAUC,IAAI,cAEvBU,EAAeP,EAAU7C,GAAI,aAC7BL,EAAEE,OAAOe,UAAY,iBACrBjB,EAAEE,OAAO4C,UAAUoB,OAAO,aAG1BlE,EAAEE,OAAOY,mBAAmBgC,UAAUkB,SAAS,aAC/ChE,EAAEE,OAAOY,mBAAmBgC,UAAUoB,OAAO,aAIrB,UAA5BlE,EAAEE,OAAOK,QAAQsE,SACU,iBAAvB7E,EAAEE,OAAOe,WACTgC,EAAUC,EAAW,aACrBlD,EAAEE,OAAOe,UAAY,oBACrBwC,EAAeP,EAAU7C,GAAI,aAC7BL,EAAEE,OAAOkE,uBAAuBnD,UAAY,iBAC5CjB,EAAEE,OAAO4C,UAAUC,IAAI,cAEvBU,EAAeP,EAAU7C,GAAI,aAC7BL,EAAEE,OAAOe,UAAY,eACrBjB,EAAEE,OAAO4C,UAAUoB,OAAO,aAG1BlE,EAAEE,OAAOkE,uBAAuBtB,UAAUkB,SAAS,aACnDhE,EAAEE,OAAOkE,uBAAuBtB,UAAUoB,OAAO,Y,KDxIjE,IAAIY,EAAYzC,aAAaC,QAAQ,aACjCyC,EAAY1C,aAAaC,QAAQ,aAIrC3C,SAASoE,iBAAiB,SAG1B,SAAiB/D,GACY,WAArBA,EAAEE,OAAOC,UACkB,YAAvBH,EAAEE,OAAOe,YACTzB,EAAAwF,eAAeC,UAAY,IAC3B,EAAAzF,EAAA0F,aAAY/C,KAAKC,MAAM0C,IAAY,IAGZ,UAAvB9E,EAAEE,OAAOe,YACTzB,EAAAwF,eAAeC,UAAY,IAC3B,EAAAzF,EAAA0F,aAAY/C,KAAKC,MAAM2C,IAAY,I,IAX/CrF,EAASqE,iBAAiB,QAAShE","sources":["src/watched.js","src/movie-modal.js"],"sourcesContent":["import { createCards, movieGalleryEl } from \"./index.js\";\nimport { movieClicked, movieCon } from \"./movie-modal.js\";\n\nlet watchList = localStorage.getItem(\"watchList\");\nlet queueList = localStorage.getItem(\"queueList\");\n\n// testing the imported functions\n\ndocument.addEventListener(\"click\", onClick);\nmovieCon.addEventListener(\"click\", movieClicked)\n\nfunction onClick(e) {\n    if (e.target.tagName === \"BUTTON\") {\n        if (e.target.innerText === \"WATCHED\") {\n            movieGalleryEl.innerHTML = \"\";\n            createCards(JSON.parse(watchList), false);\n        }\n\n        if (e.target.innerText === \"QUEUE\") {\n            movieGalleryEl.innerHTML = \"\";\n            createCards(JSON.parse(queueList), false);\n        }\n    }\n}","export const movieCon = document.querySelector(\".movie-list\");\nconst overlay = document.getElementsByClassName(\"overlay\");\n\nmovieCon.addEventListener(\"click\", movieClicked);\ndocument.addEventListener(\"click\", onClick);\n\nexport function movieClicked(e) {\n    e.preventDefault();\n    if (e.target.tagName === \"IMG\") {\n        const movieDetails = {\n            id: e.target.parentElement.parentElement.parentElement.dataset.id,\n            backdropImage: e.target.parentElement.parentElement.href,\n            popularity: e.target.parentElement.dataset.popularity,\n            about: e.target.alt,\n            originalTitle: e.target.nextElementSibling.children[0].dataset.title,\n            title: e.target.nextElementSibling.children[0].innerText,\n            genre: e.target.nextElementSibling.children[0].nextElementSibling.innerText,\n            release_date: e.target.nextElementSibling.children[0].nextElementSibling.nextElementSibling.dataset.year,\n            vote: e.target.nextElementSibling.children[0].nextElementSibling.nextElementSibling.nextElementSibling.innerText,\n            voteCount: e.target.nextElementSibling.children[0].nextElementSibling.nextElementSibling.nextElementSibling.dataset.count,\n        }\n        \n        let overlay = document.createElement(\"div\");\n        overlay.className = \"overlay\";\n        document.body.insertAdjacentElement(\"afterbegin\", overlay);\n        createModal(movieDetails);\n        isMovieOnList(movieDetails.id);\n    }\n}\n\nfunction createModal(movieDetails) {\n    const {\n        id,\n        backdropImage,\n        popularity,\n        about,\n        originalTitle,\n        title,\n        genre,\n        vote,\n        voteCount } = movieDetails;\n    let modal = `\n        <div class=\"modal-container\">\n            <div class=\"modal-close\">&times;</div>\n            <div class=\"modal-content\" data-id=\"${id}\">\n                <div class=\"modal-image\">\n                    <img src=\"${backdropImage}\" alt=\"movie photo\">\n                </div>\n                <div class=\"modal-details\">\n                    <ul class=\"modal-list\">\n                        <li class=\"modal-item\">\n                            <h1 class=\"movie-title\">${title.toUpperCase()}</h1>\n                        </li>\n                        <li class=\"modal-item\">\n                            <p class=\"modal-header\">vote/votes</p>\n                            <p><span class=\"modal-rating\">${vote}</span> / ${voteCount}</p>\n                        </li>\n                        <li class=\"modal-item\">\n                            <p class=\"modal-header\">popularity</p>\n                            <p>${popularity}</p>\n                        </li>\n                        <li class=\"modal-item\">\n                            <p class=\"modal-header\">title</p>\n                            <p>${originalTitle.toUpperCase()}</p>\n                        </li>\n                        <li class=\"modal-item\">\n                            <p class=\"modal-header\">genre</p>    \n                            <p>${genre}</p>\n                        </li>\n                    </ul>\n                    <div class=\"modal-about\">\n                        <h4>ABOUT</h4>\n                        <p>${about}</p>\n                    </div>\n                    <div class=\"modal-buttons\">\n                        <button type=\"button\" class=\"modal-button\" data-button=\"watched\">add to watched</button>\n                        <button type=\"button\" class=\"modal-button\" data-button=\"queue\">add to queue</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;\n    overlay[0].insertAdjacentHTML(\"beforeend\", modal);\n} \n\nfunction onClick(e) {\n    if (e.target.classList.contains(\"modal-close\")) {\n        closeModal();\n    }\n\n    if (e.target.classList.contains(\"modal-button\")) {\n        // will be back to this later once i find a much better approach to this\n        let votes = e.target.parentElement.previousElementSibling.previousElementSibling.children[1].children[1].innerText;\n        votes = votes.split(\"/\");\n\n        const movieData = {\n            id: e.target.parentElement.previousElementSibling.previousElementSibling.parentElement.parentElement.dataset.id,\n            poster_path: e.target.parentElement.previousElementSibling.previousElementSibling.parentElement.previousElementSibling.children[0].src,\n            title: e.target.parentElement.previousElementSibling.previousElementSibling.children[0].children[0].innerText,\n            vote_average: votes[0],\n            vote_count: votes[1],\n            popularity: e.target.parentElement.previousElementSibling.previousElementSibling.children[2].children[1].innerText,\n            original_title: e.target.parentElement.previousElementSibling.previousElementSibling.children[3].children[1].innerText,\n            genre_ids: e.target.parentElement.previousElementSibling.previousElementSibling.children[4].children[1].innerText,\n            overview: e.target.parentElement.previousElementSibling.children[1].innerText\n        }\n\n        if (e.target.dataset.button === \"watched\") {\n            if (e.target.innerText === \"ADD TO WATCHED\") {\n                addToList(movieData, \"watchList\");\n                e.target.innerText = \"remove from watched\"; \n                removeFromList(movieData.id, \"queueList\");\n                e.target.nextElementSibling.innerText = \"add to queue\";\n                e.target.classList.add(\"selected\");\n            } else {\n                removeFromList(movieData.id, \"watchList\");\n                e.target.innerText = \"add to watched\";\n                e.target.classList.remove(\"selected\");\n            }\n\n            if (e.target.nextElementSibling.classList.contains(\"selected\")) {\n                e.target.nextElementSibling.classList.remove(\"selected\");\n            }\n        }\n        \n        if (e.target.dataset.button === \"queue\") {\n            if (e.target.innerText === \"ADD TO QUEUE\") {\n                addToList(movieData, \"queueList\");\n                e.target.innerText = \"remove from queue\";\n                removeFromList(movieData.id, \"watchList\");\n                e.target.previousElementSibling.innerText = \"add to watched\";\n                e.target.classList.add(\"selected\");\n            } else {\n                removeFromList(movieData.id, \"queueList\");\n                e.target.innerText = \"add to queue\";\n                e.target.classList.remove(\"selected\");\n            }\n\n            if (e.target.previousElementSibling.classList.contains(\"selected\")) {\n                e.target.previousElementSibling.classList.remove(\"selected\");\n            }\n        }\n    }\n}\n\nfunction isMovieOnList(movieId) {\n    let watchList = JSON.parse(localStorage.getItem(\"watchList\"));\n    let queueList = JSON.parse(localStorage.getItem(\"queueList\"));\n    let modalCont = document.querySelector(\".modal-container\");\n    let watchedButton = modalCont.children[1].children[1].children[2].children[0];\n    let queueButton = modalCont.children[1].children[1].children[2].children[1];\n    \n    if (watchList.length != 0) {\n        watchList.forEach(movie => {\n            if (movie.id === movieId) {\n                watchedButton.innerText = \"remove from watched\";\n                watchedButton.classList.add(\"selected\");\n            }\n        });\n    }\n\n    if (queueList.length != 0) {\n        queueList.forEach(movie => {\n            if (movie.id === movieId) {\n                queueButton.innerText = \"remove from queue\";\n                queueButton.classList.add(\"selected\");\n            }\n        });\n    }\n}\n\nfunction addToList(movieData, list) {\n    let listStorage = JSON.parse(localStorage.getItem(list));\n    let onList = false\n\n    // Not sure but this block looks kinda awkward...\n    for (const movie of listStorage) {\n        if (movie.id == movieData.id) {\n            onList = true;\n        }\n    }\n\n    if (onList === false) {\n        listStorage.push(movieData);\n        localStorage.setItem(list, JSON.stringify(listStorage));\n    }\n\n}\n\nfunction removeFromList(movieId, list) {\n    let listStorage = JSON.parse(localStorage.getItem(list));\n\n    listStorage\n        .filter(movie => movie.id == movieId)\n        .map(movie => {\n            let index = listStorage.indexOf(movie)\n            listStorage.splice(index, 1), listStorage;\n            localStorage.setItem(list, JSON.stringify(listStorage))\n        });\n}\n\nfunction closeModal() {\n    overlay[0].children[0].classList.add(\"close\");\n    \n    setTimeout(() => {\n        overlay[0].remove();\n    }, 1400);\n}"],"names":["$2Fivl","parcelRequire","$ea8891fe7eb4334e$export$7c5257cca6435411","document","querySelector","$ea8891fe7eb4334e$var$overlay","getElementsByClassName","$ea8891fe7eb4334e$export$f0b5d5c7b7b9722c","e","preventDefault","target","tagName","movieDetails","id","parentElement","dataset","backdropImage","href","popularity","about","alt","originalTitle","nextElementSibling","children","title","innerText","genre","release_date","year","vote","voteCount","count","overlay1","createElement","className","body","insertAdjacentElement","modal","toUpperCase","insertAdjacentHTML","$ea8891fe7eb4334e$var$createModal","movieId","watchList","JSON","parse","localStorage","getItem","queueList","modalCont","watchedButton","queueButton","length","forEach","movie","classList","add","$ea8891fe7eb4334e$var$isMovieOnList","$ea8891fe7eb4334e$var$addToList","movieData","list","listStorage","onList","push","setItem","stringify","$ea8891fe7eb4334e$var$removeFromList","filter","map","index","indexOf","splice","addEventListener","contains","setTimeout","remove","votes","previousElementSibling","split","poster_path","src","vote_average","vote_count","original_title","genre_ids","overview","button","$eba37ac3deda7c3c$var$watchList","$eba37ac3deda7c3c$var$queueList","movieGalleryEl","innerHTML","createCards"],"version":3,"file":"index.50986525.js.map"}