{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCAE0BC,EAAAC,EAAAC,OAAOC,OAAzBC,EAAkBJ,EAAlBK,SAAUC,EAAQN,EAARO,IAEZC,EAAsBC,SAASC,eAAe,oBAC9CC,EAAaF,SAASC,eAAe,QACrCE,EAAaH,SAASC,eAAe,QAEvCG,EAAa,GACbC,EAAc,E,SAGHC,EAAkBC,EAAMC,G,OAAxBC,EAAiBC,MAAAC,KAAAC,U,UAAjBH,I,OAAAA,EAAfI,EAAAxB,EAAA,CAAAwB,EAAAC,GAAAC,MAAA,SAAAC,EAAiCT,EAAMC,G,IAE7BS,EAGAC,E,2FAHYC,MAChB,GAA0CC,OAAvC5B,EAAA6B,SAAS,gCAA8CD,OAAhBvB,EAAI,cAA6BuB,OAAjBzB,EAAS,UAA0ByB,OAAlBb,EAAK,eAAsBa,OAATZ,I,cADzFS,EAAGK,EAAAC,K,SAGUN,EAAIO,O,cAAjBN,EAAII,EAAAC,K,kBACHL,G,QAGP,M,0BADAO,QAAQC,MAAM,kCAAuCN,OAALb,EAAK,KAAEe,EAAAK,IACvDL,EAAAK,G,2DAT4BjB,MAAAC,KAAAC,U,UAajBgB,EAAsBC,G,OAAtBC,EAAqBpB,MAAAC,KAAAC,U,UAArBkB,I,OAAAA,EAAfjB,EAAAxB,EAAA,CAAAwB,EAAAC,GAAAC,MAAA,SAAAC,EAAqCa,G,IAE3BE,E,2FAAmBzB,EACvBD,EACgB,IAAhBA,EAAoB,GAnBT,I,OAiBP0B,EAAUT,EAAAC,KAIhBnB,EAAa2B,EAAWC,aACxB,EAAAC,EAAAC,aAAYH,EAAWI,SAAS,GAChCC,EAAwBP,G,gDAExBJ,QAAQC,MAAM,uCAAsCJ,EAAAK,I,0DAVpBjB,MAAAC,KAAAC,U,CAcpC,IAAIyB,EAAaC,OAAOC,WAGxB,SAASH,EAAwBI,GAE/B,IAAIC,EAAWC,EAASC,EADxB5C,EAAoB6C,UAAY,GAGbD,EAAnBH,EAAa,IAAmB,EAAiB,EAE7CnC,EAAc,IAAO,GACvBoC,EAAYpC,EACZqC,EAAUG,KAAKC,IAAIzC,EAAcsC,EAAYvC,KAE7CqC,EAAiD,GAArCI,KAAKE,OAAO1C,EAAc,GAAK,IAAW,EACtDqC,EAAUG,KAAKC,IAAIL,EAAYE,EAAYvC,IAG7C,IAAK,IAAI4C,EAAIP,EAAWO,GAAKN,EAASM,IAAK,CACzC,IAAMC,EAAOjD,SAASkD,cAAc,KACpCD,EAAKE,KAAO,IACZF,EAAKG,YAAcJ,EAEfA,IAAM3C,GACR4C,EAAKI,UAAUC,IAAI,UAGrBL,EAAKM,iBAAiB,SAAS,SAAUC,GACvCA,EAAMC,iBACNpD,EAAcqD,SAAS/C,KAAKyC,aAC5BxB,EAAsBY,E,IAExBzC,EAAoB4D,YAAYV,E,EAIpC/C,EAAWqD,iBAAiB,SAAS,WAC/BlD,GAAe,EACjBA,EAAc,EAEdA,GAAe,EAEjBuB,EAAsBS,E,IAGxBlC,EAAWoD,iBAAiB,SAAS,WACnClD,GAAe,EACfuB,EAAsBS,E,IAIxBD,EAAwBC,E","sources":["src/pagination.js"],"sourcesContent":["import { createCards } from './index.js'\nimport { BASE_URL, params } from './themoviedb-api.js';\nconst { language, key } = params.option;\n\nconst paginationContainer = document.getElementById('pagination-links');\nconst prevButton = document.getElementById('prev');\nconst nextButton = document.getElementById('next');\n\nlet totalPages = 20;\nlet currentPage = 1;\nconst pageSize = 50;\n\nasync function fetchMoviesByPage(page, pageSize) {\n  try {\n    const res = await fetch(\n      `${BASE_URL}/trending/movie/day?api_key=${key}&language=${language}&page=${page}&page_size=${pageSize}`\n    );\n    const data = await res.json();\n    return data;\n  } catch (error) {\n    console.error(`Error fetching movies for page ${page}:`, error);\n    throw error;\n  }\n}\n\nasync function fetchAndDisplayMovies(screenSize) {\n  try {\n    const moviesData = await fetchMoviesByPage(\n      currentPage,\n      currentPage === 1 ? 20 : pageSize\n    );\n    totalPages = moviesData.total_pages;\n    createCards(moviesData.results, true);\n    generatePaginationLinks(screenSize);\n  } catch (error) {\n    console.error('Error fetching or displaying movies:', error);\n  }\n}\n\nlet screenSize = window.innerWidth;\n\n\nfunction generatePaginationLinks(screenSize) {\n  paginationContainer.innerHTML = '';\n  let startPage, endPage, appendPage;\n  \n  screenSize < 780 ? appendPage = 4 : appendPage = 9; \n\n  if (currentPage % 10 === 1) {\n    startPage = currentPage;\n    endPage = Math.min(currentPage + appendPage, totalPages);\n  } else {\n    startPage = Math.floor((currentPage - 1) / 10) * 10 + 1;\n    endPage = Math.min(startPage + appendPage, totalPages);\n  }\n  \n  for (let i = startPage; i <= endPage; i++) {\n    const link = document.createElement('a');\n    link.href = '#';\n    link.textContent = i;\n\n    if (i === currentPage) {\n      link.classList.add('active');\n    }\n\n    link.addEventListener('click', function (event) {\n      event.preventDefault();\n      currentPage = parseInt(this.textContent);\n      fetchAndDisplayMovies(screenSize);\n    });\n    paginationContainer.appendChild(link);\n  }\n}\n\nprevButton.addEventListener('click', function () {\n  if (currentPage <= 1) {\n    currentPage = 1;\n  } else {\n    currentPage -= 1;\n  }\n  fetchAndDisplayMovies(screenSize);\n});\n\nnextButton.addEventListener('click', function () {\n  currentPage += 1;\n  fetchAndDisplayMovies(screenSize);\n});\n\n// document.addEventListener('DOMContentLoaded', fetchAndDisplayMovies);\ngeneratePaginationLinks(screenSize);\n"],"names":["$bpxeT","parcelRequire","$a05c08abba1959c4$var$_option","$7Omtz","params","option","$a05c08abba1959c4$var$language","language","$a05c08abba1959c4$var$key","key","$a05c08abba1959c4$var$paginationContainer","document","getElementById","$a05c08abba1959c4$var$prevButton","$a05c08abba1959c4$var$nextButton","$a05c08abba1959c4$var$totalPages","$a05c08abba1959c4$var$currentPage","$a05c08abba1959c4$var$fetchMoviesByPage","page","pageSize1","$a05c08abba1959c4$var$_fetchMoviesByPage","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","res","data","fetch","concat","BASE_URL","_ctx","sent","json","console","error","t0","$a05c08abba1959c4$var$fetchAndDisplayMovies","screenSize1","$a05c08abba1959c4$var$_fetchAndDisplayMovies","moviesData","total_pages","$fSCrk","createCards","results","$a05c08abba1959c4$var$generatePaginationLinks","$a05c08abba1959c4$var$screenSize","window","innerWidth","screenSize2","startPage","endPage","appendPage","innerHTML","Math","min","floor","i","link","createElement","href","textContent","classList","add","addEventListener","event","preventDefault","parseInt","appendChild"],"version":3,"file":"index.aff46e98.js.map"}