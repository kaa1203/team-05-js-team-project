{"mappings":"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","sources":["src/movie-modal.js"],"sourcesContent":["export const movieCon = document.querySelector(\".movie-list\");\nconst overlay = document.getElementsByClassName(\"overlay\");\n\nmovieCon.addEventListener(\"click\", movieClicked);\ndocument.addEventListener(\"click\", onClick);\n\nexport function movieClicked(e) {\n    e.preventDefault();\n    if (e.target.tagName === \"IMG\") {\n        const movieDetails = {\n            id: e.target.parentElement.parentElement.parentElement.dataset.id,\n            backdropImage: e.target.parentElement.parentElement.href,\n            popularity: e.target.parentElement.dataset.popularity,\n            about: e.target.alt,\n            originalTitle: e.target.nextElementSibling.children[0].dataset.title,\n            title: e.target.nextElementSibling.children[0].innerText,\n            genre_ids: e.target.nextElementSibling.children[0].nextElementSibling.children[0].dataset.genre,\n            release_date: e.target.nextElementSibling.children[0].nextElementSibling.children[0].children[0].dataset.year,\n            vote: e.target.nextElementSibling.children[0].nextElementSibling.children[1].innerText,\n            voteCount: e.target.nextElementSibling.children[0].nextElementSibling.children[1].dataset.count,\n        }\n        \n        let overlay = document.createElement(\"div\");\n        overlay.className = \"overlay\";\n        document.body.insertAdjacentElement(\"afterbegin\", overlay);\n        createModal(movieDetails);\n        isMovieOnList(movieDetails.id);\n    }\n}\n\nfunction createModal(movieDetails) {\n    const {\n        id,\n        backdropImage,\n        popularity,\n        about,\n        originalTitle,\n        title,\n        release_date,\n        genre_ids,\n        vote,\n        voteCount } = movieDetails;\n    let modal = `\n        <div class=\"modal-container\">\n            <div class=\"modal-close\">&times;</div>\n            <div class=\"modal-content\" data-id=\"${id}\">\n                <div class=\"modal-image\">\n                    <img src=\"${backdropImage}\" alt=\"movie photo\">\n                </div>\n                <div class=\"modal-details\" data-year=\"${release_date}\">\n                    <ul class=\"modal-list\">\n                        <li class=\"modal-item\">\n                            <h1 class=\"movie-title\">${title.toUpperCase()}</h1>\n                        </li>\n                        <li class=\"modal-item\">\n                            <p class=\"modal-header\">vote/votes</p>\n                            <p><span class=\"modal-rating\">${vote}</span> / ${voteCount}</p>\n                        </li>\n                        <li class=\"modal-item\">\n                            <p class=\"modal-header\">popularity</p>\n                            <p>${popularity}</p>\n                        </li>\n                        <li class=\"modal-item\">\n                            <p class=\"modal-header\">title</p>\n                            <p>${originalTitle.toUpperCase()}</p>\n                        </li>\n                        <li class=\"modal-item\">\n                            <p class=\"modal-header\">genre</p>    \n                            <p>${genre_ids}</p>\n                        </li>\n                    </ul>\n                    <div class=\"modal-about\">\n                        <h4>ABOUT</h4>\n                        <p>${about}</p>\n                    </div>\n                    <div class=\"modal-buttons\">\n                        <button type=\"button\" class=\"modal-button\" data-button=\"watched\">add to watched</button>\n                        <button type=\"button\" class=\"modal-button\" data-button=\"queue\">add to queue</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;\n\n    overlay[0].insertAdjacentHTML(\"beforeend\", modal);\n     //should've passed the movieDetails to a function here\n\n     // Apply Theme for Modal, still dont know how to get the modal-container class in the theme.js\n    applyModalTheme();\n\n\n} \n\nfunction onClick(e) {\n    if (e.target.classList.contains(\"modal-close\")) {\n        closeModal();\n    }\n\n    if (e.target.classList.contains(\"modal-button\")) {\n        // will change this later... or not.\n        let votes = e.target.parentElement.previousElementSibling.previousElementSibling.children[1].children[1].innerText;\n        votes = votes.split(\"/\");\n\n        const movieData = {\n            id: e.target.parentElement.previousElementSibling.previousElementSibling.parentElement.parentElement.dataset.id,\n            poster_path: e.target.parentElement.previousElementSibling.previousElementSibling.parentElement.previousElementSibling.children[0].src,\n            release_date: e.target.parentElement.previousElementSibling.previousElementSibling.parentElement.previousElementSibling.nextElementSibling.dataset.year,\n            title: e.target.parentElement.previousElementSibling.previousElementSibling.children[0].children[0].innerText,\n            vote_average: votes[0],\n            vote_count: votes[1],\n            popularity: e.target.parentElement.previousElementSibling.previousElementSibling.children[2].children[1].innerText,\n            original_title: e.target.parentElement.previousElementSibling.previousElementSibling.children[3].children[1].innerText,\n            genre_ids: e.target.parentElement.previousElementSibling.previousElementSibling.children[4].children[1].innerText,\n            overview: e.target.parentElement.previousElementSibling.children[1].innerText\n        }\n\n        if (e.target.dataset.button === \"watched\") {\n            if (e.target.innerText === \"ADD TO WATCHED\") {\n                addToList(movieData, \"watchList\");\n                e.target.innerText = \"remove from watched\"; \n                removeFromList(movieData.id, \"queueList\");\n                e.target.nextElementSibling.innerText = \"add to queue\";\n                e.target.classList.add(\"selected\");\n            } else {\n                removeFromList(movieData.id, \"watchList\");\n                e.target.innerText = \"add to watched\";\n                e.target.classList.remove(\"selected\");\n            }\n\n            if (e.target.nextElementSibling.classList.contains(\"selected\")) {\n                e.target.nextElementSibling.classList.remove(\"selected\");\n            }\n        }\n        \n        if (e.target.dataset.button === \"queue\") {\n            if (e.target.innerText === \"ADD TO QUEUE\") {\n                addToList(movieData, \"queueList\");\n                e.target.innerText = \"remove from queue\";\n                removeFromList(movieData.id, \"watchList\");\n                e.target.previousElementSibling.innerText = \"add to watched\";\n                e.target.classList.add(\"selected\");\n            } else {\n                removeFromList(movieData.id, \"queueList\");\n                e.target.innerText = \"add to queue\";\n                e.target.classList.remove(\"selected\");\n            }\n\n            if (e.target.previousElementSibling.classList.contains(\"selected\")) {\n                e.target.previousElementSibling.classList.remove(\"selected\");\n            }\n        }\n    }\n}\n\nfunction isMovieOnList(movieId) {\n    let watchList = JSON.parse(localStorage.getItem(\"watchList\"));\n    let queueList = JSON.parse(localStorage.getItem(\"queueList\"));\n    let modalCont = document.querySelector(\".modal-container\");\n    let watchedButton = modalCont.children[1].children[1].children[2].children[0];\n    let queueButton = modalCont.children[1].children[1].children[2].children[1];\n    \n    if (watchList.length != 0) {\n        watchList.forEach(movie => {\n            if (movie.id === movieId) {\n                watchedButton.innerText = \"remove from watched\";\n                watchedButton.classList.add(\"selected\");\n            }\n        });\n    }\n\n    if (queueList.length != 0) {\n        queueList.forEach(movie => {\n            if (movie.id === movieId) {\n                queueButton.innerText = \"remove from queue\";\n                queueButton.classList.add(\"selected\");\n            }\n        });\n    }\n}\n\nfunction addToList(movieData, list) {\n    let listStorage = JSON.parse(localStorage.getItem(list));\n    let onList = false\n\n    // Not sure but this block looks kinda awkward...\n    for (const movie of listStorage) {\n        if (movie.id == movieData.id) {\n            onList = true;\n        }\n    }\n\n    if (onList === false) {\n        listStorage.push(movieData);\n        localStorage.setItem(list, JSON.stringify(listStorage));\n    }\n\n}\n\nfunction removeFromList(movieId, list) {\n    let listStorage = JSON.parse(localStorage.getItem(list));\n\n    listStorage\n        .filter(movie => movie.id == movieId)\n        .map(movie => {\n            let index = listStorage.indexOf(movie)\n            listStorage.splice(index, 1), listStorage;\n            localStorage.setItem(list, JSON.stringify(listStorage))\n        });\n}\n\nfunction closeModal() {\n    overlay[0].children[0].classList.add(\"close-animation\");\n\n    setTimeout(() => {\n        overlay[0].remove();\n    }, 450);\n\n    // Call triggerActiveButtonClick() when the modal is closed\n    triggerActiveButtonClick();\n}\n\nfunction triggerActiveButtonClick() {\n    const activeButton = document.querySelector('.ml-buttons .ml-button.active');\n    if (activeButton) {\n        activeButton.click(); // Trigger click event on the active button\n    }\n}\n\n\n\nfunction applyModalTheme(){\n    const modalContainer = document.querySelector('.modal-container');\n    if (modalContainer) {\n        let theme = localStorage.getItem('data-theme'); \n        if (theme == 'dark'){\n            modalContainer.setAttribute('data-theme', 'dark');\n            document.querySelectorAll('.modal-header').forEach(el => el.setAttribute('data-theme', 'dark'));\n            document.querySelectorAll('.modal-button').forEach(el => el.setAttribute('data-theme', 'dark'));\n        }\n        else\n        {\n            modalContainer.setAttribute('data-theme', 'light');\n            document.querySelectorAll('.modal-header').forEach(el => el.setAttribute('data-theme', 'light'));\n            document.querySelectorAll('.modal-button').forEach(el => el.setAttribute('data-theme', 'light'));\n            \n        }\n        }\n    }\n\n"],"names":["$534706aecfa739c3$export$7c5257cca6435411","document","querySelector","$534706aecfa739c3$var$overlay","getElementsByClassName","$534706aecfa739c3$export$f0b5d5c7b7b9722c","e","preventDefault","target","tagName","movieDetails","id","parentElement","dataset","backdropImage","href","popularity","about","alt","originalTitle","nextElementSibling","children","title","innerText","genre_ids","genre","release_date","year","vote","voteCount","count","overlay1","createElement","className","body","insertAdjacentElement","modal","concat","toUpperCase","insertAdjacentHTML","modalContainer","localStorage","getItem","setAttribute","querySelectorAll","forEach","el","$534706aecfa739c3$var$applyModalTheme","$534706aecfa739c3$var$createModal","movieId","watchList","JSON","parse","queueList","modalCont","watchedButton","queueButton","length","movie","classList","add","$534706aecfa739c3$var$isMovieOnList","$534706aecfa739c3$var$addToList","movieData","list","listStorage","onList","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","err","return","push","setItem","stringify","$534706aecfa739c3$var$removeFromList","filter","map","index","indexOf","splice","addEventListener","contains","setTimeout","remove","activeButton","click","votes","previousElementSibling","split","poster_path","src","vote_average","vote_count","original_title","overview","button"],"version":3,"file":"index.3947e0cc.js.map"}